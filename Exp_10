#include <stdio.h>
#include <string.h>

#define MAX_INSTRUCTIONS 5

// Instruction Stages
char *stages[] = {"Fetch", "Decode", "Execute", "Memory", "Write-back"};

void simulate_pipeline(char instructions[][20], int num) {
    for (int cycle = 0; cycle < num + 4; cycle++) {
        printf("\nClock Cycle %d:\n", cycle + 1);

        for (int stage = 4; stage >= 0; stage--) {
            int instr_index = cycle - stage;

            if (instr_index >= 0 && instr_index < num) {
                printf("Instruction %s in stage: %s\n",
                       instructions[instr_index],
                       stages[stage]);
            }
        }
    }
}

int main() {
    char instructions[MAX_INSTRUCTIONS][20] = {
        "ADD R1,R2,R3",
        "SUB R4,R5,R6",
        "MUL R7,R8,R9",
        "LOAD R1,100(R2)",
        "STORE R3,200(R4)"
    };

    simulate_pipeline(instructions, MAX_INSTRUCTIONS);

    return 0;
}
